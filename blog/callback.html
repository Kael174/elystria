<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Processing Login...</title>
</head>
<body>
  <p>Processing login, please wait...</p>
  
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const code = urlParams.get('code');

    if (code) {
      // Use your serverless function or backend to exchange code for token
      fetch(`https://your-backend.com/get_token?code=${code}`)
        .then(res => res.json())
        .then(data => {
          localStorage.setItem('elystria_user', JSON.stringify({
            token: data.access_token,
            username: data.login
          }));
          window.location.href = '/elystria/blog/blog.html'; // redirect
        })
        .catch(err => console.error('Token fetch failed:', err));
    } else {
      console.error('Code parameter not found.');
    }
  </script>
  
</body>
</html>
